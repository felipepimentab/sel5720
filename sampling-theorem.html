<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chart.js Sine Waves with Frequency and Sampling Rate Sliders</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      #slider-container {
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <h1>Chart.js Sine Waves</h1>
    <div id="slider-container">
      <label for="frequencySlider"
        >Frequency of Sine Wave 1 (Hz):
        <span id="frequencyValue">1</span></label
      >
      <input
        type="range"
        id="frequencySlider"
        min="1"
        max="10"
        value="1"
        step="0.1"
      />
      <br />
      <label for="samplingRateSlider"
        >Sampling Rate for Sine Wave 2 (samples per second):
        <span id="samplingRateValue">10</span></label
      >
      <input
        type="range"
        id="samplingRateSlider"
        min="1"
        max="1000"
        value="10"
        step="1"
      />
    </div>
    <canvas id="sineWaveChart" width="800" height="400"></canvas>
    <script>
      // Generate sine wave data
      function generateSineWave(frequency, amplitude, phase, points) {
        const data = [];
        const totalTime = 1; // 1 second for the full wave
        for (let x = 0; x <= points; x++) {
          const time = totalTime * (x / points); // Time from 0 to 1 second
          const y =
            amplitude * Math.sin(2 * Math.PI * frequency * time + phase);
          data.push({ x: time, y });
        }
        return data;
      }

      // Sample sine wave data
      function sampleSineWave(sineWaveData, samplingRate, frequency) {
        const sampledData = [];
        const totalTime = 1; // 1 second for the full wave
        const step = 1 / samplingRate; // Time step for sampling rate
        for (let time = 0; time <= totalTime; time += step) {
          const index = Math.floor(time * sineWaveData.length);
          sampledData.push({
            x: time,
            y: sineWaveData[index % sineWaveData.length].y,
          });
        }
        return sampledData;
      }

      const points = 1000; // 1000 points for the original wave
      let frequency1 = 1;
      let samplingRate = 10;

      const ctx = document.getElementById("sineWaveChart").getContext("2d");
      const sineWaveChart = new Chart(ctx, {
        type: "line",
        data: {
          datasets: [
            {
              label: "Sine Wave 1",
              data: generateSineWave(frequency1, 1, 0, points),
              borderColor: "rgba(255, 99, 132, 1)",
              backgroundColor: "rgba(255, 99, 132, 0.2)",
              fill: false,
              tension: 0.1,
              parsing: {
                xAxisKey: "x",
                yAxisKey: "y",
              },
            },
            {
              label: "Sine Wave 2 (Sampled)",
              data: sampleSineWave(
                generateSineWave(frequency1, 1, 0, points),
                samplingRate,
                frequency1,
              ),
              borderColor: "rgba(54, 162, 235, 1)",
              backgroundColor: "rgba(54, 162, 235, 0.2)",
              fill: false,
              tension: 0.1,
              parsing: {
                xAxisKey: "x",
                yAxisKey: "y",
              },
            },
          ],
        },
        options: {
          scales: {
            x: {
              type: "linear",
              position: "bottom",
              title: {
                display: true,
                text: "Time (s)",
              },
            },
            y: {
              title: {
                display: true,
                text: "Tension",
              },
            },
          },
        },
      });

      document
        .getElementById("frequencySlider")
        .addEventListener("input", function (event) {
          frequency1 = event.target.value;
          document.getElementById("frequencyValue").innerText = frequency1;
          const sineWave1 = generateSineWave(frequency1, 1, 0, points);
          sineWaveChart.data.datasets[0].data = sineWave1;
          sineWaveChart.data.datasets[1].data = sampleSineWave(
            sineWave1,
            samplingRate,
            frequency1,
          );
          sineWaveChart.update();
        });

      document
        .getElementById("samplingRateSlider")
        .addEventListener("input", function (event) {
          samplingRate = event.target.value;
          document.getElementById("samplingRateValue").innerText = samplingRate;
          const sineWave1 = generateSineWave(frequency1, 1, 0, points);
          sineWaveChart.data.datasets[1].data = sampleSineWave(
            sineWave1,
            samplingRate,
            frequency1,
          );
          sineWaveChart.update();
        });
    </script>
  </body>
</html>
